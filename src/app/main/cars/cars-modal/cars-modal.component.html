<app-modal [formGroup]="carsForm" (submitFn)="save()">
  <modal-header>
    <span translate="cars.addLabel"></span>
  </modal-header>
  <modal-body>
    <div class="container">
      <div class="row">
        <div class="col-6">
          <mat-form-field class="modal-input">
            <input matInput formControlName="mark" [placeholder]="'cars.mark' | translate">
          </mat-form-field>
        </div>
        <div class="col-6">
          <mat-form-field class="modal-input">
            <input matInput formControlName="model" [placeholder]="'cars.model' | translate">
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-6">
          <mat-form-field class="modal-input">
            <input matInput formControlName="registrationNumber" [placeholder]="'cars.registrationNumber' | translate">
          </mat-form-field>
        </div>
        <div class="col-6">
          <app-date-picker formControlName="productionDate" placeholder="cars.productionDate"></app-date-picker>
        </div>
      </div>
      <div class="row">
        <div class="col-6">
          <mat-form-field class="modal-input">
            <input matInput formControlName="operationNumber" [placeholder]="'cars.operationNumber' | translate">
          </mat-form-field>
        </div>
        <div class="col-6">
          <mat-form-field class="modal-input">
            <mat-select formControlName="taskCar" [placeholder]="'cars.taskCar' | translate" (ngModelChange)="changeCarTask()">
              <mat-option *ngFor="let task of taskCar" [value]="task.value">
                <span [translate]="task.nlsCode"></span>
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-6">
          <mat-form-field class="modal-input" *ngIf="!selectedCarTask">
            <input matInput formControlName="equipmentOrPurpose" [placeholder]="'cars.equipmentOrPurpose' | translate">
          </mat-form-field>
          <mat-form-field class="modal-input" *ngIf="selectedCarTask === 'FIREFIGHTING'">
            <mat-select formControlName="extinguishingEquipment" [placeholder]="'cars.equipmentName' | translate"
              (ngModelChange)="changeExtinguishingEquipment()">
              <mat-option *ngFor="let element of extinguishingEquipment" [value]="element.value">
                <span [translate]="element.nlsCode"></span>
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field class="modal-input" *ngIf="selectedCarTask === 'SPECIAL'">
            <mat-select formControlName="specialCarsPurpose" [placeholder]="'cars.purposeName' | translate">
              <mat-option *ngFor="let purpose of specialCarsPurpose" [value]="purpose.value">
                <span [translate]="purpose.nlsCode"></span>
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="col-6">
          <mat-form-field class="modal-input">
            <mat-select formControlName="carWeight" [placeholder]="'cars.carWeight' | translate">
              <mat-option *ngFor="let weight of carWeight" [value]="weight.value">
                <span [translate]="weight.nlsCode"></span>
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-6">
          <app-date-picker *ngIf="!data.id" formControlName="technicalExaminationDate" placeholder="cars.technicalExaminationDate"></app-date-picker>
        </div>
        <div class="col-6">
          <app-date-picker *ngIf="!data.id" formControlName="insuranceDate" placeholder="cars.insuranceDate"></app-date-picker>
        </div>
      </div>
      <div class="row">
        <div class="col-6">
          <app-input-number formControlName="waterTankCapacity" translateKey="cars.waterTankCapacity" translateTooltip="cars.capacityInCubicMeters"></app-input-number>
        </div>
        <div class="col-6">
          <app-input-number formControlName="foamTankCapacity" translateKey="cars.foamTankCapacity" translateTooltip="cars.capacityInCubicMeters"></app-input-number>
        </div>
      </div>

      <div class="row">
        <div class="col-6">
          <mat-form-field *ngIf="!selectEdextinguishingEquipment" class="modal-input" [matTooltip]="'cars.pompePerformanceTooltip' | translate"
            matTooltipPosition="left">
            <input matInput formControlName="autopompeOrMotopompePerformance" [placeholder]="'cars.autopompeOrMotopmePerformance' | translate"
              (keypress)="onKeyPress($event)">
          </mat-form-field>
          <app-input-number *ngIf="selectEdextinguishingEquipment === 'AUTOPOMPE'" formControlName="autopompePerformance"
            translateKey="cars.autopompePerformance" translateTooltip="cars.pompePerformanceTooltip"></app-input-number>
          <app-input-number *ngIf="selectEdextinguishingEquipment === 'MOTOPOMPA'" formControlName="motopompePerformance"
            translateKey="cars.motopompePerformance" translateTooltip="cars.pompePerformanceTooltip"></app-input-number>
        </div>
        <div class="col-6">
          <mat-form-field class="modal-input">
            <input matInput formControlName="carType" [placeholder]="'cars.carType' | translate">
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-6">
          <app-input-number *ngIf="!data.id" formControlName="carMileage" translateKey="cars.carMileage"></app-input-number>
        </div>
      </div>
    </div>
  </modal-body>
  <modal-footer>
    <button mat-raised-button class="primary" [disabled]="!carsForm.valid">
      <span translate="global.save"></span>
    </button>
  </modal-footer>
</app-modal>
